\hypertarget{classTarbora_1_1Resource}{}\section{Tarbora\+:\+:Resource Class Reference}
\label{classTarbora_1_1Resource}\index{Tarbora\+::\+Resource@{Tarbora\+::\+Resource}}


An abstract resource.  




{\ttfamily \#include $<$Resource.\+hpp$>$}



Inheritance diagram for Tarbora\+:\+:Resource\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=311pt]{classTarbora_1_1Resource__inherit__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classTarbora_1_1Resource_afc89548edc7c22bfe6c2270dd011d189}\label{classTarbora_1_1Resource_afc89548edc7c22bfe6c2270dd011d189}} 
const std\+::string \& \hyperlink{classTarbora_1_1Resource_afc89548edc7c22bfe6c2270dd011d189}{get\+Name} () const
\begin{DoxyCompactList}\small\item\em Returns the filename of the resource. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classTarbora_1_1Resource_a7c37d25d519a673529cac26dc179b449}\label{classTarbora_1_1Resource_a7c37d25d519a673529cac26dc179b449}} 
{\bfseries Resource} (const std\+::string \&name)
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classTarbora_1_1Resource_a00dae18f7cf782dabaab704896c52069}\label{classTarbora_1_1Resource_a00dae18f7cf782dabaab704896c52069}} 
std\+::string \hyperlink{classTarbora_1_1Resource_a00dae18f7cf782dabaab704896c52069}{name\+\_\+}
\begin{DoxyCompactList}\small\item\em The filename of the resource. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Friends}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classTarbora_1_1Resource_a685a33b83a13f36aceea3ff940994ac9}\label{classTarbora_1_1Resource_a685a33b83a13f36aceea3ff940994ac9}} 
class {\bfseries Resource\+Loader}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
An abstract resource. 

This resource will be shared between all the classes that use it, and loaded only once (probably in startup or level load).

If you want to implement your own resource, inherit from this class. Make sure your constructor calls the \hyperlink{classTarbora_1_1Resource}{Resource} constructor with the filename of the resource.

A resource constructor must be private, as it can only be created inside a {\itshape Resource\+Loader}.

A Resource\+Loader is also needed, it must inherit from {\itshape Resource\+Loader}, be a friend of the class \hyperlink{classTarbora_1_1ResourceManager}{Resource\+Manager} and implement two private methods\+:


\begin{DoxyCode}
\textcolor{keyword}{virtual} \textcolor{keyword}{const} std::string getPattern();
\textcolor{keyword}{virtual} std::shared\_ptr<Resource> load(std::string path);
\end{DoxyCode}


{\itshape get\+Pattern} returns a regex, the files that match it will be loaded with that loader.

{\itshape Load} loads the file in {\itshape path}, reading it from disk and parsing it or doing the needed conversions.

All Resource\+Loaders need to be registered in \hyperlink{classTarbora_1_1ResourceManager}{Resource\+Manager} to work.

If a file would match the pattern of several Resource\+Loaders, it will be loaded by the lastest registered one.

Here\textquotesingle{}s an example of the implementation of a \hyperlink{classTarbora_1_1Resource}{Resource} and its {\itshape Resource\+Loader} for txt files\+:


\begin{DoxyCode}
\textcolor{keyword}{class }Text : \textcolor{keyword}{public} Resource
\{
    \textcolor{keyword}{friend} \textcolor{keyword}{class }TextResourceLoader;
\textcolor{keyword}{public}:
    \textcolor{keyword}{const} std::string GetText()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_Text; \}
\textcolor{keyword}{private}:
    Text(std::string name, std::string text) : Resource(name), m\_Text(text) \{\}

    std::string m\_Text;
\};

\textcolor{keyword}{class }TextResourceLoader : \textcolor{keyword}{public} ResourceLoader
\{
    \textcolor{keyword}{friend} \textcolor{keyword}{class }ResourceManager;
\textcolor{keyword}{private}:
    \textcolor{keyword}{virtual} \textcolor{keyword}{const} std::string getPattern()\textcolor{keyword}{ override }\{ \textcolor{keywordflow}{return} \textcolor{stringliteral}{"*.txt"}; \}
    \textcolor{keyword}{virtual} std::shared\_ptr<Resource> load(std::string path)\textcolor{keyword}{ override}
\textcolor{keyword}{    }\{
        \textcolor{comment}{// Try to open the file.}
        std::ifstream file;
        file.open(path.c\_str());
        \textcolor{keywordflow}{if} (file.fail())
            \textcolor{keywordflow}{return} std::shared\_ptr<Resource>();

        \textcolor{comment}{// Parse the contents to a string.}
        std::string s = std::string(std::istreambuf\_iterator<char>(file), std::istreambuf\_iterator<char>())
      ;
        std::shared\_ptr<Resource> r = std::shared\_ptr<Resource>(\textcolor{keyword}{new} Text(path, s)); \textcolor{comment}{// Create the Resource.}
        file.close(); \textcolor{comment}{// Remember to close the file!}
        \textcolor{keywordflow}{return} r;
    \}
\};
\end{DoxyCode}


\begin{DoxySeeAlso}{See also}
\hyperlink{classTarbora_1_1ResourceManager}{Resource\+Manager} 

Json 

\hyperlink{classTarbora_1_1Text}{Text} 
\end{DoxySeeAlso}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
Tarbora/\+Framework/\+Resource\+Manager/Resource.\+hpp\end{DoxyCompactItemize}
