<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tarbora: ImViewGizmo</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="docs_icon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Tarbora
   &#160;<span id="projectnumber">0.6-ALPHA</span>
   </div>
   <div id="projectbrief">The Game Engine for Makers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ImViewGizmo </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Manipulate view orientation with 1 single line of code</p>
<p><img src="http://i.imgur.com/7UVcyDd.gif" alt="Image of ImViewGizmo" class="inline"/></p>
<h2>ImGuizmo</h2>
<p>ImGizmo is a small (.h and .cpp) library built ontop of Dear ImGui that allow you to manipulate(Rotate &amp; translate at the moment) 4x4 float matrices. No other dependancies. Coded with Immediate Mode (IM) philosophy in mind.</p>
<p>Built against DearImgui 1.53WIP</p>
<p><img src="http://i.imgur.com/y4mcVoT.gif" alt="Image of Rotation" class="inline"/> <img src="http://i.imgur.com/o8q8iHq.gif" alt="Image of Translation" class="inline"/> <img src="http://i.imgur.com/3Ez5LBr.gif" alt="Image of Bounds" class="inline"/></p>
<p>There is now a sample for Win32/OpenGL ! With a binary in bin directory. <img src="https://i.imgur.com/nXlzyqD.png" alt="Image of Sample" class="inline"/></p>
<h2>ImSequencer</h2>
<p>A WIP little sequencer used to edit frame start/end for different events in a timeline. <img src="http://i.imgur.com/BeyNwCn.png" alt="Image of Rotation" class="inline"/> Check the sample for the documentation. More to come...</p>
<h2>API doc</h2>
<p>Call BeginFrame right after ImGui_XXXX_NewFrame();</p>
<div class="fragment"><div class="line"> {C++}</div>
<div class="line">void BeginFrame();</div>
</div><!-- fragment --><p>return true if mouse cursor is over any gizmo control (axis, plan or screen component)</p>
<div class="fragment"><div class="line"> {C++}</div>
<div class="line">bool IsOver();**</div>
</div><!-- fragment --><p>return true if mouse IsOver or if the gizmo is in moving state</p>
<div class="fragment"><div class="line"> {C++}</div>
<div class="line">bool IsUsing();**</div>
</div><!-- fragment --><p>enable/disable the gizmo. Stay in the state until next call to Enable. gizmo is rendered with gray half transparent color when disabled</p>
<div class="fragment"><div class="line"> {C++}</div>
<div class="line">void Enable(bool enable);**</div>
</div><!-- fragment --><p>helper functions for manualy editing translation/rotation/scale with an input float translation, rotation and scale float points to 3 floats each Angles are in degrees (more suitable for human editing) example:</p>
<div class="fragment"><div class="line">{C++}</div>
<div class="line">float matrixTranslation[3], matrixRotation[3], matrixScale[3];</div>
<div class="line">ImGuizmo::DecomposeMatrixToComponents(gizmoMatrix.m16, matrixTranslation, matrixRotation, matrixScale);</div>
<div class="line">ImGui::InputFloat3(&quot;Tr&quot;, matrixTranslation, 3);</div>
<div class="line">ImGui::InputFloat3(&quot;Rt&quot;, matrixRotation, 3);</div>
<div class="line">ImGui::InputFloat3(&quot;Sc&quot;, matrixScale, 3);</div>
<div class="line">ImGuizmo::RecomposeMatrixFromComponents(matrixTranslation, matrixRotation, matrixScale, gizmoMatrix.m16);</div>
</div><!-- fragment --><p>These functions have some numerical stability issues for now. Use with caution.</p>
<div class="fragment"><div class="line"> {C++}</div>
<div class="line">void DecomposeMatrixToComponents(const float *matrix, float *translation, float *rotation, float *scale);</div>
<div class="line">void RecomposeMatrixFromComponents(const float *translation, const float *rotation, const float *scale, float *matrix);**</div>
</div><!-- fragment --><p>Render a cube with face color corresponding to face normal. Usefull for debug/test</p>
<div class="fragment"><div class="line"> {C++}</div>
<div class="line">void DrawCube(const float *view, const float *projection, float *matrix);**</div>
</div><!-- fragment --><p>Call it when you want a gizmo Needs view and projection matrices. Matrix parameter is the source matrix (where will be gizmo be drawn) and might be transformed by the function. Return deltaMatrix is optional. snap points to a float[3] for translation and to a single float for scale or rotation. Snap angle is in Euler Degrees.</p>
<div class="fragment"><div class="line"> {C++}</div>
<div class="line">    enum OPERATION</div>
<div class="line">    {</div>
<div class="line">        TRANSLATE,</div>
<div class="line">        ROTATE,</div>
<div class="line">        SCALE</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    enum MODE</div>
<div class="line">    {</div>
<div class="line">        LOCAL,</div>
<div class="line">        WORLD</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">void Manipulate(const float *view, const float *projection, OPERATION operation, MODE mode, float *matrix, float *deltaMatrix = 0, float *snap = 0);**</div>
</div><!-- fragment --><h2>ImGui Example</h2>
<p>Code for :</p>
<p><img src="http://i.imgur.com/GL5flN1.png" alt="Image of dialog" class="inline"/></p>
<div class="fragment"><div class="line"> {C++}</div>
<div class="line">void EditTransform(const Camera&amp; camera, matrix_t&amp; matrix)</div>
<div class="line">{</div>
<div class="line">    static ImGuizmo::OPERATION mCurrentGizmoOperation(ImGuizmo::ROTATE);</div>
<div class="line">    static ImGuizmo::MODE mCurrentGizmoMode(ImGuizmo::WORLD);</div>
<div class="line">    if (ImGui::IsKeyPressed(90))</div>
<div class="line">        mCurrentGizmoOperation = ImGuizmo::TRANSLATE;</div>
<div class="line">    if (ImGui::IsKeyPressed(69))</div>
<div class="line">        mCurrentGizmoOperation = ImGuizmo::ROTATE;</div>
<div class="line">    if (ImGui::IsKeyPressed(82)) // r Key</div>
<div class="line">        mCurrentGizmoOperation = ImGuizmo::SCALE;</div>
<div class="line">    if (ImGui::RadioButton(&quot;Translate&quot;, mCurrentGizmoOperation == ImGuizmo::TRANSLATE))</div>
<div class="line">        mCurrentGizmoOperation = ImGuizmo::TRANSLATE;</div>
<div class="line">    ImGui::SameLine();</div>
<div class="line">    if (ImGui::RadioButton(&quot;Rotate&quot;, mCurrentGizmoOperation == ImGuizmo::ROTATE))</div>
<div class="line">        mCurrentGizmoOperation = ImGuizmo::ROTATE;</div>
<div class="line">    ImGui::SameLine();</div>
<div class="line">    if (ImGui::RadioButton(&quot;Scale&quot;, mCurrentGizmoOperation == ImGuizmo::SCALE))</div>
<div class="line">        mCurrentGizmoOperation = ImGuizmo::SCALE;</div>
<div class="line">    float matrixTranslation[3], matrixRotation[3], matrixScale[3];</div>
<div class="line">    ImGuizmo::DecomposeMatrixToComponents(matrix.m16, matrixTranslation, matrixRotation, matrixScale);</div>
<div class="line">    ImGui::InputFloat3(&quot;Tr&quot;, matrixTranslation, 3);</div>
<div class="line">    ImGui::InputFloat3(&quot;Rt&quot;, matrixRotation, 3);</div>
<div class="line">    ImGui::InputFloat3(&quot;Sc&quot;, matrixScale, 3);</div>
<div class="line">    ImGuizmo::RecomposeMatrixFromComponents(matrixTranslation, matrixRotation, matrixScale, matrix.m16);</div>
<div class="line"> </div>
<div class="line">    if (mCurrentGizmoOperation != ImGuizmo::SCALE)</div>
<div class="line">    {</div>
<div class="line">        if (ImGui::RadioButton(&quot;Local&quot;, mCurrentGizmoMode == ImGuizmo::LOCAL))</div>
<div class="line">            mCurrentGizmoMode = ImGuizmo::LOCAL;</div>
<div class="line">        ImGui::SameLine();</div>
<div class="line">        if (ImGui::RadioButton(&quot;World&quot;, mCurrentGizmoMode == ImGuizmo::WORLD))</div>
<div class="line">            mCurrentGizmoMode = ImGuizmo::WORLD;</div>
<div class="line">    }</div>
<div class="line">    static bool useSnap(false);</div>
<div class="line">    if (ImGui::IsKeyPressed(83))</div>
<div class="line">        useSnap = !useSnap;</div>
<div class="line">    ImGui::Checkbox(&quot;&quot;, &amp;useSnap);</div>
<div class="line">    ImGui::SameLine();</div>
<div class="line">    vec_t snap;</div>
<div class="line">    switch (mCurrentGizmoOperation)</div>
<div class="line">    {</div>
<div class="line">    case ImGuizmo::TRANSLATE:</div>
<div class="line">        snap = config.mSnapTranslation;</div>
<div class="line">        ImGui::InputFloat3(&quot;Snap&quot;, &amp;snap.x);</div>
<div class="line">        break;</div>
<div class="line">    case ImGuizmo::ROTATE:</div>
<div class="line">        snap = config.mSnapRotation;</div>
<div class="line">        ImGui::InputFloat(&quot;Angle Snap&quot;, &amp;snap.x);</div>
<div class="line">        break;</div>
<div class="line">    case ImGuizmo::SCALE:</div>
<div class="line">        snap = config.mSnapScale;</div>
<div class="line">        ImGui::InputFloat(&quot;Scale Snap&quot;, &amp;snap.x);</div>
<div class="line">        break;</div>
<div class="line">    }</div>
<div class="line">    ImGuiIO&amp; io = ImGui::GetIO();</div>
<div class="line">    ImGuizmo::SetRect(0, 0, io.DisplaySize.x, io.DisplaySize.y);</div>
<div class="line">    ImGuizmo::Manipulate(camera.mView.m16, camera.mProjection.m16, mCurrentGizmoOperation, mCurrentGizmoMode, matrix.m16, NULL, useSnap ? &amp;snap.x : NULL);</div>
<div class="line">}</div>
</div><!-- fragment --><h2>License</h2>
<p>ImGuizmo is licensed under the MIT License, see LICENSE for more information. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
